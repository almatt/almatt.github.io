<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="paybox"></div>
    <script src="https://ca7f1f1e87b5.ngrok.io/applepay-client/index.js"></script>
    <script>

        window.onload = () => {
            window.PayBoxApplePay('paybox', 'asd', {amount: 123, description: 'asd'}, () => { }, () => { }, (a) => {console.log(a)}, (err)=> {console.log(err)});
        }
        
        // // client-script
        // setTimeout(async () => {
        //     const response = await window.ApplePaySession.canMakePaymentsWithActiveCard('merchant.kz.paybox.p2p');

        //     window.frames[0].postMessage({
        //         event: response
        //     },'*');
        // }, 2000);

        // window.addEventListener("message", receiveMessage, false);

        // function receiveMessage(event) {
        //     console.log(event);

        //     const options = {
        //             'total': {
        //                 'label': 'ApplePay',
        //                 'amount': 200,
        //             },
        //             'countryCode': 'KZ',
        //             'currencyCode': 'KZT',
        //             'merchantCapabilities': ['supports3DS'],
        //             'supportedNetworks': ['masterCard', 'visa']
        //     }

        //     const applePaySession = new window.ApplePaySession(1, options);

        //     applePaySession.onvalidatemerchant = function() { console.log('validation') };
        //     applePaySession.onpaymentauthorized = function() { console.log('paymentauth') };

        //     applePaySession.begin();
        // }
    </script>
</body>
</html>